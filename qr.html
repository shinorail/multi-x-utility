<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>QRãƒ„ãƒ¼ãƒ« & ã‚²ãƒ¼ãƒˆ | Multi-X Utility</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
<style>
:root{--p:#d4af37;--bg:#020617;--card:#1e293b;--txt:#f8fafc}
body{font-family:sans-serif;background:var(--bg);color:var(--txt);margin:0;display:flex;flex-direction:column;min-height:100vh}
.credit{font-size:0.7rem;color:var(--p);padding:10px;text-align:center}
.cont{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;gap:15px}
.tabs{display:flex;width:100%;max-width:400px;background:var(--card);border-radius:12px;padding:5px}
.tab{flex:1;padding:12px;text-align:center;cursor:pointer;border-radius:8px;font-size:0.85rem;font-weight:bold;color:#94a3b8}
.tab.active{background:var(--p);color:#000}
.panel{display:none;width:100%;max-width:400px;flex-direction:column;align-items:center;gap:15px}
.panel.active{display:flex}
input{width:100%;padding:15px;border-radius:10px;border:1px solid #334155;background:var(--card);color:white;font-size:1rem;box-sizing:border-box}
#qrcode{background:white;padding:15px;border-radius:10px;width:200px;height:200px;display:flex;align-items:center;justify-content:center}
#qrcode img{width:100%;height:100%}
#v-area{width:100%;aspect-ratio:1;background:#000;border-radius:15px;overflow:hidden;border:2px solid var(--p);position:relative;display:none}
video{width:100%;height:100%;object-fit:cover}
.scan-line{position:absolute;top:0;left:0;width:100%;height:2px;background:var(--p);box-shadow:0 0 10px var(--p);animation:scan 2s infinite linear}
@keyframes scan{0%{top:0%}100%{top:100%}}
#scan-res{width:100%;padding:15px;background:var(--card);border-radius:10px;font-size:0.9rem;word-break:break-all;border:1px solid #334155;text-align:center;display:none;min-height:50px}
.btn{background:var(--p);color:#000;padding:15px;width:100%;border-radius:10px;font-weight:bold;border:none;cursor:pointer;font-size:1rem}
.nav{height:65px;background:var(--card);display:flex;justify-content:space-around;align-items:center;border-top:1px solid #334155}
.nav a{color:#94a3b8;text-decoration:none;font-size:0.8rem;display:flex;flex-direction:column;align-items:center}
#overlay{display:none;position:fixed;inset:0;background:rgba(2,6,23,0.9);z-index:1000;flex-direction:column;justify-content:center;align-items:center}
</style>
</head>
<body>

<div id="overlay">
    <div style="font-size:4rem;">ğŸ”“</div>
    <h2 style="color:var(--p);" id="u-name">èªè¨¼æˆåŠŸ</h2>
    <p>å…ˆè¡Œã‚¢ã‚¯ã‚»ã‚¹ã‚’é–‹å§‹ã—ã¾ã™...</p>
</div>

<div class="credit">åˆ¶ä½œï¼šç¯ ãƒäº•ä¹—å‹™åŒº äºŒå‘¨å¹´è¨˜å¿µ</div>

<div class="cont">
    <div class="tabs">
        <div id="t-gate" class="tab active" onclick="swTab('gate')">å…ˆè¡Œã‚²ãƒ¼ãƒˆ</div>
        <div id="t-gen" class="tab" onclick="swTab('gen')">QRä½œæˆ</div>
        <div id="t-scan" class="tab" onclick="swTab('scan')">QRèª­å–</div>
    </div>

    <div id="panel-gate" class="panel active">
        <h3 style="color:var(--p);margin:0;">GATE</h3>
        <p style="font-size:0.8rem;color:#94a3b8;text-align:center;">æ‹›å¾…QRã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦<br>å…ˆè¡Œä½“é¨“ã‚’é–‹å§‹ã—ã¦ãã ã•ã„</p>
        <button class="btn" onclick="startScan('gate')">ã‚²ãƒ¼ãƒˆã‚’èµ·å‹•</button>
    </div>

    <div id="panel-gen" class="panel">
        <input type="text" id="text" placeholder="æ–‡å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" oninput="genQR()">
        <div id="qrcode"></div>
        <p style="font-size:0.8rem;color:#94a3b8">å…¥åŠ›ã™ã‚‹ã¨å³åº§ã«æ›´æ–°ã•ã‚Œã¾ã™</p>
    </div>

    <div id="panel-scan" class="panel">
        <button id="start-btn" class="btn" onclick="startScan('scan')">ã‚¹ã‚­ãƒ£ãƒŠãƒ¼ã‚’èµ·å‹•</button>
    </div>

    <div id="v-area" style="width:100%; max-width:400px; display:none;">
        <div style="position:relative; width:100%; aspect-ratio:1; border-radius:15px; overflow:hidden; border:2px solid var(--p);">
            <video id="video" playsinline style="width:100%; height:100%; object-fit:cover;"></video>
            <div class="scan-line"></div>
        </div>
    </div>
    <div id="scan-res"></div>
</div>

<nav class="nav">
    <a href="menu.html"><span>ğŸ </span>ãƒ›ãƒ¼ãƒ </a>
    <a href="calc.html"><span>ğŸ”¢</span>è¨ˆç®—æ©Ÿ</a>
    <a href="timer.html"><span>âŒ›</span>ã‚¿ã‚¤ãƒãƒ¼</a>
    <a href="qr.html" style="color:var(--p)"><span>ğŸ”³</span>QR/GATE</a>
</nav>

<canvas id="canvas" style="display:none;"></canvas>

<script src="qr.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>æ°´å¹³å™¨ | Multi-X Utility</title>
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="image/icon.png">
<link rel="icon" type="image/png" href="image/icon.png">
<style>
:root{--p:#d4af37;--bg:#020617;--card:#1e293b;--txt:#f8fafc}
body{font-family:sans-serif;background:var(--bg);color:var(--txt);margin:0;display:flex;flex-direction:column;min-height:100vh;overflow:hidden}
.credit{font-size:0.7rem;color:var(--p);padding:10px;text-align:center;letter-spacing:2px}
.cont{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;padding:20px}
/* æ°´å¹³å™¨ãƒ‡ã‚¶ã‚¤ãƒ³ */
.base{width:250px;height:250px;border:4px solid #334155;border-radius:50%;position:relative;display:none}
.ball{width:45px;height:45px;background:var(--p);border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 0 20px var(--p);transition:0.1s linear}
.val{margin-top:40px;font-size:2.8rem;font-family:monospace;color:var(--p);display:none}
/* è¦ç´„ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
#terms-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--bg);z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px;box-sizing:border-box}
.terms-card{background:var(--card);padding:25px;border-radius:24px;width:100%;max-width:380px;display:flex;flex-direction:column;box-shadow:0 20px 40px rgba(0,0,0,0.5);border:1px solid #334155}
.terms-content{font-size:0.85rem;color:#94a3b8;line-height:1.7;margin:15px 0;text-align:left}
h2{color:var(--p);margin:0;font-size:1.3rem;text-align:center}
.btn-agree{background:var(--p);color:#000;border:none;padding:20px;border-radius:50px;font-weight:bold;font-size:1.1rem;cursor:pointer;margin-top:10px}
.btn-agree:active{transform:scale(0.95)}
.nav{height:65px;background:var(--card);display:flex;justify-content:space-around;align-items:center;border-top:1px solid #334155}
.nav a{color:#94a3b8;text-decoration:none;font-size:0.8rem;display:flex;flex-direction:column;align-items:center}
</style>
</head>
<body>
<div class="credit">åˆ¶ä½œï¼šç¯ ãƒäº•ä¹—å‹™åŒº äºŒå‘¨å¹´è¨˜å¿µ</div>

<div id="terms-overlay">
    <div class="terms-card">
        <h2>ã‚¸ãƒ£ã‚¤ãƒ­ã‚»ãƒ³ã‚µãƒ¼åˆ©ç”¨ç¢ºèª</h2>
        <div class="terms-content">
            <strong>ã€å‹•ä½œç¢ºèªã€‘</strong><br>
            æ°´å¹³å™¨ã‚’å‹•ã‹ã™ãŸã‚ã€ç«¯æœ«ã®å‚¾ãã‚»ãƒ³ã‚µãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚AndroidãŠã‚ˆã³iPhoneã®ä¸¡æ–¹ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚<br><br>
            <strong>ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã€‘</strong><br>
            ã‚»ãƒ³ã‚µãƒ¼æƒ…å ±ã¯ç”»é¢è¡¨ç¤ºã®ã¿ã«ä½¿ç”¨ã—ã€è¨˜éŒ²ã‚„é€ä¿¡ã¯è¡Œã„ã¾ã›ã‚“ã€‚<br><br>
            <strong>ã€åŒæ„äº‹é …ã€‘</strong><br>
            æ¸¬å®šå€¤ã¯ç›®å®‰ã§ã™ã€‚åŒæ„ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã‚»ãƒ³ã‚µãƒ¼ã®åˆ©ç”¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚
        </div>
        <button class="btn-agree" onclick="askPermission()">åŒæ„ã—ã¦é–‹å§‹ã™ã‚‹</button>
    </div>
</div>

<div class="cont">
    <div class="base" id="base">
        <div class="ball" id="ball"></div>
        <div style="position:absolute;top:50%;left:0;width:100%;height:1px;background:#334155;transform:translateY(-50%)"></div>
        <div style="position:absolute;left:50%;top:0;width:1px;height:100%;background:#334155;transform:translateX(-50%)"></div>
    </div>
    <div class="val" id="val">0.0Â°</div>
</div>

<nav class="nav">
    <a href="menu.html"><span>ğŸ </span>ãƒ›ãƒ¼ãƒ </a>
    <a href="calc.html"><span>ğŸ”¢</span>è¨ˆç®—æ©Ÿ</a>
    <a href="timer.html"><span>âŒ›</span>ã‚¿ã‚¤ãƒãƒ¼</a>
    <a href="level.html" style="color:var(--p)"><span>ğŸ“</span>æ°´å¹³å™¨</a>
</nav>

<script>
function askPermission() {
    // iPhone (iOS 13+) ã®ãŸã‚ã®æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
        DeviceOrientationEvent.requestPermission()
            .then(response => {
                if (response === 'granted') {
                    startSensor();
                } else {
                    alert("ã‚»ãƒ³ã‚µãƒ¼ã®è¨±å¯ãŒã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚è¨­å®šã‹ã‚‰ãƒ–ãƒ©ã‚¦ã‚¶ã®å‹•ä½œè¨±å¯ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
                }
            })
            .catch(console.error);
    } else {
        // Android ã¾ãŸã¯ å¤ã„iOS / PC
        startSensor();
    }
}

function startSensor() {
    document.getElementById('terms-overlay').style.display = 'none';
    document.getElementById('base').style.display = 'block';
    document.getElementById('val').style.display = 'block';

    window.addEventListener('deviceorientation', (event) => {
        let x = event.beta;  // å‰å¾Œå‚¾ã (-180ã€œ180)
        let y = event.gamma; // å·¦å³å‚¾ã (-90ã€œ90)

        if (x === null || y === null) return;

        // è¡¨ç¤ºç”¨è§’åº¦ï¼ˆå‰å¾Œã®å‚¾ãã‚’ãƒ¡ã‚¤ãƒ³ã«è¡¨ç¤ºï¼‰
        document.getElementById('val').innerText = Math.abs(x).toFixed(1) + 'Â°';

        // ãƒœãƒ¼ãƒ«ã®ä½ç½®è¨ˆç®—ï¼ˆä¸­å¿ƒ50% + å‚¾ãã‚’å‰²åˆã§åŠ ç®—ï¼‰
        // 45åº¦ä»¥ä¸Šã®å‚¾ãã¯ç«¯ã«å›ºå®š
        let topPos = 50 + (x / 45) * 50;
        let leftPos = 50 + (y / 45) * 50;

        if (topPos > 90) topPos = 90; if (topPos < 10) topPos = 10;
        if (leftPos > 90) leftPos = 90; if (leftPos < 10) leftPos = 10;

        const ball = document.getElementById('ball');
        ball.style.top = topPos + '%';
        ball.style.left = leftPos + '%';
        
        // æ°´å¹³ã«è¿‘ã„æ™‚(2åº¦ä»¥å†…)ã¯è‰²ã‚’å¤‰ãˆã‚‹æ¼”å‡º
        ball.style.background = (Math.abs(x) < 2 && Math.abs(y) < 2) ? "#4ade80" : "#d4af37";
    }, true);
}

// ã‚¢ãƒ—ãƒªèª˜å°ãƒãƒŠãƒ¼
if (!(window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone)) {
    const banner = document.createElement('div');
    banner.style.cssText = "background:var(--p);color:#000;text-align:center;padding:10px;font-size:0.85rem;font-weight:bold;position:fixed;top:0;left:0;z-index:9999;width:100%;box-shadow:0 2px 10px rgba(0,0,0,0.5)";
    banner.innerHTML = "âœ¨ ã“ã®å…ˆã¯ã‚¢ãƒ—ãƒªã§ï¼ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ãƒ•ãƒ«æ©Ÿèƒ½ã‚’ä½¿ãŠã†";
    banner.onclick = () => { window.location.href = 'index.html'; };
    document.body.prepend(banner);
}
</script>
</body>
</html>

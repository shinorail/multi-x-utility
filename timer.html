<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ã‚¿ã‚¤ãƒãƒ¼ | Multi-X Utility</title>
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="image/icon.png">
<link rel="icon" type="image/png" href="image/icon.png">
<style>
:root{--p:#d4af37;--bg:#020617;--card:#1e293b;--txt:#f8fafc}
body{font-family:sans-serif;background:var(--bg);color:var(--txt);margin:0;height:100vh;display:flex;flex-direction:column;align-items:center;overflow:hidden}
.credit-header{font-size:0.75rem;color:var(--p);padding:15px;letter-spacing:1px;font-weight:bold}
.cont{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;padding:20px;box-sizing:border-box}
.time-disp{font-size:5.5rem;font-family:monospace;color:var(--p);margin-bottom:30px;text-shadow:0 0 20px rgba(212,175,55,0.3)}
.input-group{display:flex;gap:10px;margin-bottom:30px;align-items:center}
input{width:85px;padding:15px;border-radius:12px;border:1px solid #334155;background:var(--card);color:white;font-size:1.6rem;text-align:center}
span{font-weight:bold;font-size:1.2rem}
.btn-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;width:100%;max-width:400px}
button{padding:20px;border-radius:15px;border:none;font-size:1.1rem;font-weight:bold;cursor:pointer;transition:0.2s}
.btn-start{background:var(--p);color:#000;grid-column:span 2}
.btn-stop{background:#4b5563;color:white}
.btn-reset{background:#941717;color:white}
button:disabled{opacity:0.5;cursor:not-allowed}
.nav{width:100%;height:65px;background:var(--card);display:flex;justify-content:space-around;align-items:center;border-top:1px solid #334155}
.nav a{color:#94a3b8;text-decoration:none;font-size:0.8rem;display:flex;flex-direction:column;align-items:center}
</style>
</head>
<body>
<div class="credit-header">å€‹äººæ´»å‹•åï¼šç¯ ãƒäº•ä¹—å‹™åŒº äºŒå‘¨å¹´</div>
<div class="cont">
    <div id="disp" class="time-disp">00:00</div>
    <div class="input-group" id="in-area">
        <input type="number" id="m" placeholder="åˆ†" min="0" max="99" inputmode="numeric">
        <span>åˆ†</span>
        <input type="number" id="s" placeholder="ç§’" min="0" max="59" inputmode="numeric">
        <span>ç§’</span>
    </div>
    <div class="btn-grid">
        <button id="main-btn" class="btn-start" onclick="startT()">è¨ˆæ¸¬é–‹å§‹</button>
        <button class="btn-stop" onclick="stopT()">åœæ­¢</button>
        <button class="btn-reset" onclick="resetT()">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
</div>
<nav class="nav">
    <a href="menu.html"><span>ğŸ </span>ãƒ›ãƒ¼ãƒ </a>
    <a href="calc.html"><span>ğŸ”¢</span>è¨ˆç®—æ©Ÿ</a>
    <a href="timer.html" style="color:var(--p)"><span>âŒ›</span>ã‚¿ã‚¤ãƒãƒ¼</a>
    <a href="sw.html"><span>â±ï¸</span>è¨ˆæ¸¬</a>
</nav>

<script>
let timerId = null;

function update() {
    const endTime = localStorage.getItem('t_end');
    if (!endTime) {
        clearInterval(timerId);
        timerId = null;
        return;
    }

    const remain = Math.ceil((parseInt(endTime) - Date.now()) / 1000);

    if (remain <= 0) {
        stopT();
        document.getElementById('disp').innerText = "00:00";
        // ãƒ–ãƒ©ã‚¦ã‚¶ç‰ˆã§ã‚‚ç¢ºå®Ÿã«æ°—ã¥ãã‚ˆã†ã«é€šçŸ¥
        alert("ã‚¿ã‚¤ãƒãƒ¼çµ‚äº† / Timer Finished");
    } else {
        const min = Math.floor(remain / 60).toString().padStart(2, '0');
        const sec = (remain % 60).toString().padStart(2, '0');
        document.getElementById('disp').innerText = min + ":" + sec;
        document.getElementById('in-area').style.opacity = "0.2";
        document.getElementById('main-btn').disabled = true;
    }
}

function startT() {
    const minInput = document.getElementById('m').value;
    const secInput = document.getElementById('s').value;
    
    const min = parseInt(minInput) || 0;
    const sec = parseInt(secInput) || 0;
    const totalSec = (min * 60) + sec;

    if (totalSec <= 0) {
        alert("æ™‚é–“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
        return;
    }

    const endTime = Date.now() + (totalSec * 1000);
    localStorage.setItem('t_end', endTime);
    
    if (timerId) clearInterval(timerId);
    timerId = setInterval(update, 1000);
    update(); // å³æ™‚åæ˜ 
}

function stopT() {
    clearInterval(timerId);
    timerId = null;
    localStorage.removeItem('t_end');
    document.getElementById('in-area').style.opacity = "1";
    document.getElementById('main-btn').disabled = false;
}

function resetT() {
    stopT();
    document.getElementById('disp').innerText = "00:00";
    document.getElementById('m').value = "";
    document.getElementById('s').value = "";
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦è‡ªå‹•å†é–‹
window.onload = function() {
    if (localStorage.getItem('t_end')) {
        update(); 
        timerId = setInterval(update, 1000);
    }
};

// ç¿»è¨³ç”¨ï¼ˆGoogleç¿»è¨³ã®åæ˜ ã‚’å¾…ã¤ãŸã‚ã®è¨­å®šï¼‰
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'ja'}, 'google_translate_element');
}
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>
